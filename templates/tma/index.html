{% extends 'layouts/master.html' %}

{% set title = "Tinggi Muka Air" %}
{% block css %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
    <section class="content-header">
    <h1>Tinggi Muka Air</h1>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item">Tinggi Muka Air</li>
    </ol>
    </section>
    <table class="table table-hover table-bordered table-grid">
        <thead>
            <tr>
                <th rowspan="3" class="align-middle">No</th>
                <th rowspan="3" class="align-middle text-center">Lokasi / Pos</th>
                <th rowspan="2" colspan="3" class="align-middle text-center">Level Siaga</th>
                <th colspan="1" class="text-center">
                    <a href="{ path_for('tma.index', query_params={'periode': prev_day}) }}">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                </th>
                <th colspan="6" class="text-center">
                    <span id='datepicker'>{{ periode.strftime("%d %B %Y") }}</span>
                </th>
                <th colspan="1" class="text-center">
                    <a href="{ path_for('tma.index', query_params={'periode': next_day}) }}">
                        <i class="fas fa-chevron-right"></i>
                    </a>
                </th>
            </tr>
            <tr>
                <th colspan="5" class="text-center">Telemetri (meter)</th>
                <th colspan="3" class="text-center">Manual</th>
            </tr>
            <tr>
                <th class="text-center">Hijau</th>
                <th class="text-center">Kuning</th>
                <th class="text-center">Merah</th>
                <th>06</th>
                <th>12</th>
                <th>18</th>
                <th>00</th>
                <th>*</th>
                <th>06</th>
                <th>12</th>
                <th>18</th>
            </tr>
        </thead>
        <tbody>
        {% for l in lokasi %}
            <tr>
                <td>{{ loop.index }}</td>
                <td><a href="{ path_for('tma.show', {'id': l.id}) }}">{{ l.nama }}</a></td>
                <td><i>siaga1</i></td>
                <td><i>siaga2</i></td>
                <td><i>siaga3</i></td>
                <td>{{ result[loop.index0][0] }}</td>
                <td>{{ result[loop.index0][1] }}</td>
                <td>{{ result[loop.index0][2] }}</td>
                <td>{{ result[loop.index0][3] }}</td>
                <td>
                  {{ result[loop.index0][4] }}
                  {% if result[loop.index0][5] %}
                      <br>
                      <small>{{ result[loop.index0][5] }}</small>
                  {% endif %}
                </td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block js %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
    <script>
        $('#datepicker').datepicker({
            todayHighlight: true,
            autoclose: true,
            format: 'yyyy-mm-dd'
        });
        $('#datepicker').on('changeDate', function () {
            window.location = "{ path_for('tma.index') }}?periode=" + $('#datepicker').datepicker('getFormattedDate')
        });
    </script>
{% endblock %}
